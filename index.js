import dotenv from 'dotenv'
dotenv.config({ path: "./assets/modules/.env" })
import TelegramBot from 'node-telegram-bot-api'
import { PFKeyboard, otsivKeyboard, amountsKeyboard, yandexPf, supportKeyboard } from './assets/keyboard/keyboard.js'
import {logger} from "./assets/logger/logger.js";
import { promises as fs } from 'fs';
import { Admin } from './assets/scripts/adminFunctions.js'
import { User } from './assets/scripts/userFunctions.js';
import amount from './assets/db/bot/amounts/amounts.json' with {type: "json"}
import { Manager } from './assets/scripts/managerFunctions.js';
import { log } from 'console';
import { createKeyboard } from "./assets/scripts/check_buttons.js";
import { pool } from "./assets/db/config/connect.js";

const bot = new TelegramBot(process.env.TOKEN, { polling: true })

const commands = JSON.parse(await fs.readFile('./assets/db/commands/commands.json'))

const user = new User()

bot.setMyCommands(commands)


bot.on('message', async msg => {
    logger.info(msg.from.id)
    const id = msg.from.id;
    const chatId = msg.chat.id;
    const firstName = msg.from.first_name;
    const lastName = msg.from.last_name;
    const username = msg.from.username;
    const from = msg.text ? msg.text.replace(/^\/start\s*/, '') || null : null;
    logger.info(from)

    console.log(chatId);

    if (msg.text && msg.text.includes('/start')) {
        try {
            const userInfo = await user.getUserInfo(chatId);
            const refInfo = await user.getReferralLinkData(from);
            if (refInfo != null){
                if (userInfo == null){
                    user.addReferralUsers(chatId, username, refInfo.id, 1, Date.now());
                }
                else{
                    console.log(refInfo);
                    user.addReferralUsers(chatId, username, refInfo.id, 0, userInfo.firstJoinDate);
                }
            }

            const isAllowed = await user.checkUserStatus(bot, chatId);
            if (!isAllowed) {
                return;
            }

            return user.checkUserExists(id, async (error, exists) => {
                if (error) {
                    logger.error("Error checking user");
                    return;
                }

                if (!exists) {
                    user.addUser(id, chatId, firstName, lastName, username, from, 0, "–∞–∫—Ç–∏–≤–Ω—ã–π", "–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å", 0, async (error) => {
                        if (error) {
                            logger.error("Error adding user.");
                        } else {
                            logger.info("User added to the database");
                            new Admin().checkAdmin(bot, chatId, id);
                        }
                    });
                } else {
                    logger.info('User already exists in the database');
                    new Admin().checkAdmin(bot, chatId, id);
                }
            });
        } catch (error) {
            logger.error(error);
        }
    }
})

const manager = new Manager();

bot.on('callback_query', async msg => {
    const chatId = msg.message.chat.id;
    const messageId = msg.message.message_id;
    const callbackData = msg.data.split('_');
    const action = msg.data.split('_')[0];
    const userInfo = await user.getUserInfo(chatId);

    console.log(action);

    try{
        if (userInfo.role == "–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å"){
            await bot.deleteMessage(chatId, messageId);
        }
    } catch(error){
        console.log(error);
    }
    
    
    logger.info(`${chatId} ${callbackData}`)

    let result = await new Promise((resolve, reject) => {
        pool.query("SELECT * FROM user_buttons_activity WHERE callback_data LIKE ? AND work='yes'", [`${action}%`], (error, results) => {
            if (error) {
                return reject(error);
            }
            if (results.length === 0) {
                return resolve(null);
            }
            resolve(results[0]);
        });
    });
    if (userInfo.role != "–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å"){
        result = [];
    }
    console.log(114, result);
    if (result != null){
        let btns = [];
        let reply_markup = [];
        switch (action) {
            case "nakrutkapf":
                await bot.sendMessage(chatId, "üöÄ –ú—ã –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ –∑–∞–Ω–∏–º–∞–µ–º—Å—è –Ω–∞–∫—Ä—É—Ç–∫–æ–π –ø–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–æ–≥–æ —Ñ–∞–∫—Ç–æ—Ä–∞ –±–æ–ª–µ–µ 10 –ª–µ—Ç.\n\nüè∑Ô∏è –í—ã –º–æ–∂–µ—Ç–µ –∑–∞–∫–∞–∑–∞—Ç—å –Ω–∞–∫—Ä—É—Ç–∫—É –ø–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–æ–≥–æ —Ñ–∞–∫—Ç–æ—Ä–∞ –Ω–∞ Avito –¥–ª—è –≤–∞—à–∏—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π, –∏–ª–∏ –∑–∞–∫–∞–∑–∞—Ç—å –Ω–∞–∫—Ä—É—Ç–∫—É –¥–ª—è –≤–∞—à–µ–≥–æ —Å–∞–π—Ç–∞ —á–µ—Ä–µ–∑ –ø–æ–∏—Å–∫–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É –Ø–Ω–¥–µ–∫—Å.\n\nüëá –í—ã–±–µ—Ä–∏—Ç–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—É –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏:", PFKeyboard);
                break;
            case "nakrutkaotsivov":
                btns = [['avitootsiv'], ['yamdexmapotisv'], ['twogisotsiv'], ['youlaotsiv'], ['otzovikotsiv'], ['start']];
                reply_markup = await createKeyboard(btns, '–û—Ç–∑—ã–≤—ã');
                await bot.sendMessage(
                    chatId,
                    "‚ú® –£ –Ω–∞—Å –µ—Å—Ç—å –æ–≥—Ä–æ–º–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π, –≥–æ—Ç–æ–≤—ã—Ö –æ—Å—Ç–∞–≤–∏—Ç—å –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–µ –æ—Ç–∑—ã–≤—ã –æ –≤–∞—à–µ–º –±–∏–∑–Ω–µ—Å–µ.\n\n" +
                    "üåê –ú—ã –ø—Ä–µ–¥–ª–∞–≥–∞–µ–º –æ—Ç–∑—ã–≤—ã –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º –∏ —Ç—â–∞—Ç–µ–ª—å–Ω–æ —Å–ª–µ–¥–∏–º –∑–∞ –∫–∞–∂–¥—ã–º –æ—Ç–∑—ã–≤–æ–º.\n\n" +
                    "–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:\n" +
                    "    1. –ü—Ä–æ—Ü–µ—Å—Å –ø—Ä–æ–≤–µ—Ä–∫–∏: –ú—ã –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º –∫–∞–∂–¥—ã–π –æ—Ç–∑—ã–≤\n" + "    –≤ —Ç–µ—á–µ–Ω–∏–µ 14 –¥–Ω–µ–π. –ï—Å–ª–∏ –æ—Ç–∑—ã–≤ —É–¥–∞–ª—è–µ—Ç—Å—è, –º—ã —Ä–∞–∑–º–µ—â–∞–µ–º –µ–≥–æ\n" + "    –∑–∞–Ω–æ–≤–æ.\n" +
                    "    2. –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å: –ù–∞—à–∏ –æ—Ç–∑—ã–≤—ã –æ—Å—Ç–∞—é—Ç—Å—è —Å –ø–æ—á—Ç–∏ 100%\n" + "    –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å—é, —á—Ç–æ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –≤—ã—à–µ, —á–µ–º —É –Ω–∞—à–∏—Ö\n" + "    –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤.\n" +
                    "    3. –û—Ç—á–µ—Ç—ã: –ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ –æ—Ç–∑—ã–≤ –ø—Ä–æ–π–¥–µ—Ç 14-–¥–Ω–µ–≤–Ω—ã–π –ø–µ—Ä–∏–æ–¥\n" + "    –∏ –±—É–¥–µ—Ç —É—Ç–≤–µ—Ä–∂–¥–µ–Ω, –º—ã –¥–µ–ª–∞–µ–º —Å–∫—Ä–∏–Ω—à–æ—Ç –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ–º\n" + "    –µ–≥–æ –≤–∞–º –≤ –æ—Ç—á–µ—Ç–∞—Ö –æ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ–π —Ä–∞–±–æ—Ç–µ.\n\n" +
                    "–í–∞—à–∏ –¥–µ–π—Å—Ç–≤–∏—è:\n" +
                    "    1. –í—ã–±–µ—Ä–∏—Ç–µ –ø–ª–æ—â–∞–¥–∫—É: –ú—ã –ø—Ä–µ–¥–ª–∞–≥–∞–µ–º –æ—Ç–∑—ã–≤—ã –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º, –≤–∫–ª—é—á–∞—è –Ø–Ω–¥–µ–∫—Å –ö–∞—Ä—Ç—ã, –Ø–Ω–¥–µ–∫—Å –£—Å–ª—É–≥–∏, Avito, 2–ì–ò–°, Flamp, –∏ Youla.\n" +
                    "    2. –í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç–∑—ã–≤–æ–≤: –û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ, —Å–∫–æ–ª—å–∫–æ –æ—Ç–∑—ã–≤–æ–≤ –≤–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–ª—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –≤–∞—à–∏—Ö –±–∏–∑–Ω–µ—Å-—Ü–µ–ª–µ–π.\n" +
                    "    3. –û–ø–ª–∞—Ç–∞: –ü–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –æ—Ç–∑—ã–≤–æ–≤, –ø—Ä–æ–∏–∑–≤–µ–¥–∏—Ç–µ –æ–ø–ª–∞—Ç—É, –∏ –º—ã –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –ø—Ä–∏—Å—Ç—É–ø–∏–º –∫ —Ä–∞–±–æ—Ç–µ.\n\n" +
                    "üîó –í—ã–±–µ—Ä–∏—Ç–µ –Ω—É–∂–Ω—É—é –ø–ª–∞—Ç—Ñ–æ—Ä–º—É –∏ –∑–∞–∫–∞–∑—ã–≤–∞–π—Ç–µ –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å, —á—Ç–æ–±—ã —É–ª—É—á—à–∏—Ç—å —Ä–µ–ø—É—Ç–∞—Ü–∏—é –≤–∞—à–µ–≥–æ –±–∏–∑–Ω–µ—Å–∞ –∏ —É–≤–µ–ª–∏—á–∏—Ç—å –µ–≥–æ –ø—Ä–∏–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤.",
                    {reply_markup}
                );
                break;
            case "profile":
                await user.profile(bot, chatId, msg.from.id);
                break;
            case "rules":
                await bot.sendMessage(chatId,
                    "–ü—Ä–∞–≤–∏–ª–∞ –ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è\n" +
                    "üìú –í–∞–∂–Ω–æ –æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è —Å –ø—Ä–∞–≤–∏–ª–∞–º–∏ –ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –Ω–∞—à–∏–º–∏ —É—Å–ª—É–≥–∞–º–∏. –ò—Ö —Å–æ–±–ª—é–¥–µ–Ω–∏–µ –ø–æ–º–æ–∂–µ—Ç –∏–∑–±–µ–∂–∞—Ç—å –Ω–µ–¥–æ—Ä–∞–∑—É–º–µ–Ω–∏–π –∏ –æ–±–µ—Å–ø–µ—á–∏—Ç –ª—É—á—à–µ–µ –≤–∑–∞–∏–º–æ–ø–æ–Ω–∏–º–∞–Ω–∏–µ –º–µ–∂–¥—É –Ω–∞–º–∏ –∏ –Ω–∞—à–∏–º–∏ –∫–ª–∏–µ–Ω—Ç–∞–º–∏.\n" +
                    "    1. –í—ã —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –≤—ã–±–∏—Ä–∞–µ—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏—Ö —Ñ–∞–∫—Ç–æ—Ä–æ–≤ –∏–ª–∏ –æ—Ç–∑—ã–≤–æ–≤, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–µ –≤–∞—à–∏–º –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç—è–º. –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ –º—ã –Ω–µ –Ω–µ—Å–µ–º –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –∑–∞ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è –≤–∞—à–µ–≥–æ –≤—ã–±–æ—Ä–∞, —Ç–∞–∫ –∫–∞–∫ –∏—Å—Ö–æ–¥ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –º–Ω–æ–≥–∏—Ö —Ñ–∞–∫—Ç–æ—Ä–æ–≤, –≤–∫–ª—é—á–∞—è –∞–ª–≥–æ—Ä–∏—Ç–º—ã –ø–ª–∞—Ç—Ñ–æ—Ä–º.\n" +
                    "    2. –ò—Å–ø–æ–ª–Ω–µ–Ω–∏–µ –æ—Ç–∑—ã–≤–æ–≤: –í—Å–µ –æ—Ç–∑—ã–≤—ã –æ—Å—Ç–∞–≤–ª—è—é—Ç—Å—è –Ω–∞—à–∏–º–∏ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è–º–∏ —Å—Ç—Ä–æ–≥–æ –ø–æ –≤–∞—à–µ–º—É –∑–∞–ø—Ä–æ—Å—É. –í—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç–µ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã—Ö –æ—Ç–∑—ã–≤–æ–≤.\n" +
                    "    3. –Æ—Ä–∏–¥–∏—á–µ—Å–∫–∞—è –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å: –ù–∞—à–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –≤—ã—Å—Ç—É–ø–∞–µ—Ç –ø–æ—Å—Ä–µ–¥–Ω–∏–∫–æ–º –º–µ–∂–¥—É –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è–º–∏ –∏ –∑–∞–∫–∞–∑—á–∏–∫–∞–º–∏. –Æ—Ä–∏–¥–∏—á–µ—Å–∫–∞—è –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –∑–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —É—Å–ª—É–≥ –ª–µ–∂–∏—Ç –Ω–∞ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ –∏ –∑–∞–∫–∞–∑—á–∏–∫–µ. –ú—ã –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ–º –ª–∏—à—å –ø–ª–∞—Ç—Ñ–æ—Ä–º—É –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å—Ç–æ—Ä–æ–Ω.\n" +
                    "    4. –û—Ç–∫–∞–∑ –æ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞: –ú—ã –æ—Å—Ç–∞–≤–ª—è–µ–º –∑–∞ —Å–æ–±–æ–π –ø—Ä–∞–≤–æ –æ—Ç–∫–∞–∑–∞—Ç—å –≤ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –∑–∞–∫–∞–∑–∞ –ø–æ –Ω–∞—à–µ–º—É —É—Å–º–æ—Ç—Ä–µ–Ω–∏—é. –í —Å–ª—É—á–∞–µ –æ—Ç–∫–∞–∑–∞, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –¥–µ–Ω—å–≥–∏ –Ω–∞ –±–∞–ª–∞–Ω—Å –ª–∏—á–Ω–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞ –∫–ª–∏–µ–Ω—Ç–∞ –∏–ª–∏ –Ω–∞ –µ–≥–æ —Ä–∞—Å—á–µ—Ç–Ω—ã–π —Å—á–µ—Ç, –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ–≥–æ –º–µ—Ç–æ–¥–∞ –æ–ø–ª–∞—Ç—ã.\n" +
                    "    5. –°–æ–≥–ª–∞—Å–∏–µ —Å –ø—Ä–∞–≤–∏–ª–∞–º–∏: –í—ã–±–∏—Ä–∞—è –Ω–∞—à–∏ —É—Å–ª—É–≥–∏, –≤—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–≥–ª–∞—à–∞–µ—Ç–µ—Å—å —Å–æ –≤—Å–µ–º–∏ –≤—ã—à–µ–∏–∑–ª–æ–∂–µ–Ω–Ω—ã–º–∏ –ø—Ä–∞–≤–∏–ª–∞–º–∏. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏—Ö –ø–æ–Ω–∏–º–∞–µ—Ç–µ –∏ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç–µ.\n" +
                    "üìå –ó–∞–∫–æ–Ω–Ω–æ—Å—Ç—å –¥–µ–π—Å—Ç–≤–∏–π: –í—Å–µ –Ω–∞—à–∏ —É—Å–ª—É–≥–∏ —Ä–µ–∞–ª–∏–∑—É—é—Ç—Å—è –≤ —Ä–∞–º–∫–∞—Ö –¥–µ–π—Å—Ç–≤—É—é—â–µ–≥–æ –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–∞. –ú—ã –ø—Ä–∏–∑—ã–≤–∞–µ–º –∫–ª–∏–µ–Ω—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–∞—à–∏ —É—Å–ª—É–≥–∏ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ –∏ —Å —É—á–µ—Ç–æ–º –≤—Å–µ—Ö –∑–∞–∫–æ–Ω–Ω—ã—Ö —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π.",
                    {
                        reply_markup: {
                            inline_keyboard: [
                                [{ text: "–í –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç", callback_data: "profile" }, { text: "–í –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é", callback_data: "start" }]
                            ]
                        }
                    });
                break;
            case "support":
                await bot.sendMessage(chatId, "üîß –ï—Å–ª–∏ —É –≤–∞—Å –≤–æ–∑–Ω–∏–∫–ª–∏ –≤–æ–ø—Ä–æ—Å—ã –∏–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã, –Ω–∞—à–∞ —Å–ª—É–∂–±–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –≥–æ—Ç–æ–≤–∞ –ø–æ–º–æ—á—å! üïò –ù–∞—à–µ —Ä–∞–±–æ—á–µ–µ –≤—Ä–µ–º—è: —Å 9:00 –¥–æ 20:00 –ø–æ –ú–æ—Å–∫–æ–≤—Å–∫–æ–º—É –≤—Ä–µ–º–µ–Ω–∏. –ù–µ —Å—Ç–µ—Å–Ω—è–π—Ç–µ—Å—å –æ–±—Ä–∞—â–∞—Ç—å—Å—è, –º—ã –≤—Å–µ–≥–¥–∞ –Ω–∞ —Å–≤—è–∑–∏ –¥–ª—è –≤–∞—Å!\n\n" +
                    "üîç –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞: –ü–µ—Ä–µ–¥ —Ç–µ–º –∫–∞–∫ –∑–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å, —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º –≤–∞–º –ø–æ—Å–µ—Ç–∏—Ç—å —Ä–∞–∑–¥–µ–ª FAQ / –ö–µ–π—Å—ã –≤ –≥–ª–∞–≤–Ω–æ–º –º–µ–Ω—é –Ω–∞—à–µ–≥–æ –±–æ—Ç–∞. –¢–∞–º –≤—ã –Ω–∞–π–¥—ë—Ç–µ –º–Ω–æ–∂–µ—Å—Ç–≤–æ –ø–æ–ª–µ–∑–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤, –∞ —Ç–∞–∫–∂–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ –Ω–∞—à —Å–∞–π—Ç –∏ —Ç–µ–ª–µ–≥—Ä–∞–º-–∫–∞–Ω–∞–ª—ã, –≥–¥–µ –ø–æ–¥—Ä–æ–±–Ω–æ —Ä–∞–∑—ä—è—Å–Ω–µ–Ω—ã –º–Ω–æ–≥–∏–µ –∞—Å–ø–µ–∫—Ç—ã –Ω–∞—à–∏—Ö —É—Å–ª—É–≥.\n\n" +
                    "üìñ –û–±—à–∏—Ä–Ω–∞—è –±–∞–∑–∞ –∑–Ω–∞–Ω–∏–π: –í —Ä–∞–∑–¥–µ–ª–µ FAQ / –ö–µ–π—Å—ã –≤—ã –Ω–∞–π–¥–µ—Ç–µ –Ω–µ —Ç–æ–ª—å–∫–æ –æ—Ç–≤–µ—Ç—ã –Ω–∞ —á–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã, –Ω–æ –∏ –º–Ω–æ–≥–æ—á–∏—Å–ª–µ–Ω–Ω—ã–µ –∫–µ–π—Å—ã –∏ –ø—Ä–∏–º–µ—Ä—ã, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–º–æ–≥—É—Ç –≤–∞–º –ª—É—á—à–µ –ø–æ–Ω—è—Ç—å, –∫–∞–∫ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–∞—à–∏ —É—Å–ª—É–≥–∏.\n\n" +
                    "üí° –ì–æ—Ç–æ–≤—ã –ø–æ–º–æ—á—å: –ù–∞—à–∞ —Ü–µ–ª—å ‚Äî —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤–∞—à –æ–ø—ã—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –Ω–∞—à–∏—Ö —É—Å–ª—É–≥ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –∫–æ–º—Ñ–æ—Ä—Ç–µ–Ω –∏ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–µ–Ω. –ï—Å–ª–∏ –≤—ã –Ω–µ –Ω–∞—à–ª–∏ –æ—Ç–≤–µ—Ç –≤ FAQ, –Ω–∞–ø–∏—à–∏—Ç–µ –Ω–∞–º, –∏ –º—ã –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ –ø–æ–º–æ–∂–µ–º —Ä–µ—à–∏—Ç—å –ª—é–±—É—é –ø—Ä–æ–±–ª–µ–º—É.\n\n" +
                    "üîó –ü–æ–¥–∫–ª—é—á–∞–π—Ç–µ—Å—å –∫ –Ω–∞—à–∏–º –∫–∞–Ω–∞–ª–∞–º: –ü–æ–¥–ø–∏—Å—ã–≤–∞–π—Ç–µ—Å—å –Ω–∞ –Ω–∞—à–∏ —Ç–µ–ª–µ–≥—Ä–∞–º-–∫–∞–Ω–∞–ª—ã, —á—Ç–æ–±—ã –±—ã—Ç—å –≤ –∫—É—Ä—Å–µ –≤—Å–µ—Ö –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö –Ω–æ–≤–æ—Å—Ç–µ–π –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π. –°—Å—ã–ª–∫–∏ –Ω–∞ –∫–∞–Ω–∞–ª—ã –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ –≤ —Ä–∞–∑–¥–µ–ª–µ FAQ / –ö–µ–π—Å—ã.", supportKeyboard);
                break;
            case "faq":
                await bot.sendMessage(chatId, "üåê –û—Å–Ω–æ–≤–Ω–æ–π –∫–∞–Ω–∞–ª –ê–≤–∏—Ç–æ –ø—Ñ (@e_vito_info)" +
                    "üîç –ü–æ–≥—Ä—É–∑–∏—Ç–µ—Å—å –≤ –º–∏—Ä –Ω–∞–∫—Ä—É—Ç–∫–∏ –ø–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏—Ö —Ñ–∞–∫—Ç–æ—Ä–æ–≤ –Ω–∞ Avito —Å –Ω–∞—à–∏–º –æ—Å–Ω–æ–≤–Ω—ã–º –∫–∞–Ω–∞–ª–æ–º! –ó–¥–µ—Å—å –º—ã –Ω–µ —Ç–æ–ª—å–∫–æ —Ä–∞–∑–±–∏—Ä–∞–µ–º –ø—Ä–æ—Ü–µ—Å—Å—ã –≤ –¥–µ—Ç–∞–ª—è—Ö, –Ω–æ –∏ –æ–±—ä—è—Å–Ω—è–µ–º, —á—Ç–æ —Ç–∞–∫–æ–µ –ø–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏–π —Ñ–∞–∫—Ç–æ—Ä, –∫–∞–∫ –æ–Ω –≤–ª–∏—è–µ—Ç –Ω–∞ –ø–æ–∑–∏—Ü–∏–∏ –≤–∞—à–∏—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π, –∏ –ø–æ—á–µ–º—É –Ω–∞—à –ø–æ–¥—Ö–æ–¥ —è–≤–ª—è–µ—Ç—Å—è –ª—É—á—à–∏–º –Ω–∞ —Ä—ã–Ω–∫–µ.\n\n" +
                    "üöÄ –ß—Ç–æ –≤—ã –Ω–∞–π–¥–µ—Ç–µ –≤ —ç—Ç–æ–π –≥—Ä—É–ø–ø–µ:\n" +
                    "   ‚Ä¢ –ì–ª—É–±–æ–∫–∏–µ –∞–Ω–∞–ª–∏–∑—ã –∏ —Ä–∞–∑–±–æ—Ä—ã: –£–∑–Ω–∞–π—Ç–µ, –ø–æ—á–µ–º—É –≤–∞–∂–Ω–æ —Å—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–∏ –ø–æ–¥—Ö–æ–¥–∏—Ç—å –∫ –Ω–∞–∫—Ä—É—Ç–∫–µ –ø–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏—Ö —Ñ–∞–∫—Ç–æ—Ä–æ–≤." +
                    "   ‚Ä¢ –≠–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã–µ –∑–Ω–∞–Ω–∏—è: –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ–º –º–∞—Ç–µ—Ä–∏–∞–ª—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞—à–∞ –∫–æ–º–∞–Ω–¥–∞ –∫–æ–ø–∏–ª–∞ –≥–æ–¥–∞–º–∏ ‚Äî —Ü–µ–Ω–Ω—ã–µ —Å–≤–µ–¥–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã –Ω–µ –Ω–∞–π–¥–µ—Ç–µ –≤ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–∞—Ö." +
                    "   ‚Ä¢ –ú—É–ª—å—Ç–∏–º–µ–¥–∏–π–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç: –í–∞—Å –∂–¥—É—Ç –∞—É–¥–∏–æ –∏ –≤–∏–¥–µ–æ–∑–∞–ø–∏—Å–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–º–æ–≥—É—Ç –ª—É—á—à–µ –ø–æ–Ω—è—Ç—å —Ç–µ–º—É –∏ —É—Å–≤–æ–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ." +
                    "   ‚Ä¢ –°–µ–∫—Ä–µ—Ç—ã –º–∞—Å—Ç–µ—Ä—Å—Ç–≤–∞: –ü–æ–¥–µ–ª–∏–º—Å—è, –ø–æ—á–µ–º—É –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ—Å—Ç–∞–≤–ª—è—Ç—å –ø–ª–∞–Ω –Ω–∞–∫—Ä—É—Ç–∫–∏ –∏ –∫–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –µ–≥–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å, —á—Ç–æ–±—ã –¥–æ—Å—Ç–∏—á—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ —ç—Ñ—Ñ–µ–∫—Ç–∞." +
                    "üìà –ü–æ–ª—å–∑–∞ –¥–ª—è –≤–∞—à–µ–≥–æ –±–∏–∑–Ω–µ—Å–∞:" +
                    "   –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –Ω–∞—à–∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∏ –ø–æ–¥—Ö–æ–¥—ã, —á—Ç–æ–±—ã –≤—ã–≤–µ—Å—Ç–∏ –≤–∞—à–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è –Ω–∞ –Ω–æ–≤—ã–π —É—Ä–æ–≤–µ–Ω—å –∏ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–≤–µ–ª–∏—á–∏—Ç—å –∏—Ö —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å." +
                    "üé• –ü–æ–¥–∫–ª—é—á–∞–π—Ç–µ—Å—å –∫ –Ω–∞–º:" +
                    "   –ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Ç–µ—Å—å –∫ –Ω–∞—à–µ–º—É –∫–∞–Ω–∞–ª—É @e_vito_info –∏ –Ω–∞—á–Ω–∏—Ç–µ –ø—Ä–∏–º–µ–Ω—è—Ç—å –ª—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ –Ω–∞–∫—Ä—É—Ç–∫–∏ —É–∂–µ —Å–µ–≥–æ–¥–Ω—è. –í–∞—à–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è –∑–∞—Å–ª—É–∂–∏–≤–∞—é—Ç –±—ã—Ç—å –Ω–∞ –≤–µ—Ä—à–∏–Ω–µ!\n\n" +
                    "üó£ –û—Å–Ω–æ–≤–Ω–æ–π –∫–∞–Ω–∞–ª –ø–æ –æ—Ç–∑—ã–≤–∞–º –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—é –¥–µ–ª–æ–≤–æ–π —Ä–µ–ø—É—Ç–∞—Ü–∏–µ–π (@e_otzyv)\n" +
                    "üîç –ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Ç–µ—Å—å –∫ –Ω–∞—à–µ–º—É —ç–∫—Å–ø–µ—Ä—Ç–Ω–æ–º—É –∫–∞–Ω–∞–ª—É, –ø–æ—Å–≤—è—â–µ–Ω–Ω–æ–º—É –≤—Å–µ–º –∞—Å–ø–µ–∫—Ç–∞–º —Ä–∞–±–æ—Ç—ã —Å –æ—Ç–∑—ã–≤–∞–º–∏ –Ω–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞—Ö! –ó–¥–µ—Å—å –≤—ã –Ω–∞–π–¥–µ—Ç–µ –≤—Å—ë, —á—Ç–æ –Ω—É–∂–Ω–æ –∑–Ω–∞—Ç—å –æ —Å—Ä–æ–∫–∞—Ö –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –æ—Ç–∑—ã–≤–æ–≤, –∏—Ö –≤–ª–∏—è–Ω–∏–∏ –Ω–∞ —Ä–µ–ø—É—Ç–∞—Ü–∏—é –≤–∞—à–µ–≥–æ –±–∏–∑–Ω–µ—Å–∞, –∏ –∫–∞–∫ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ —É–ø—Ä–∞–≤–ª—è—Ç—å –≤–∞—à–∏–º –æ–Ω–ª–∞–π–Ω-–ø—Ä–∏—Å—É—Ç—Å—Ç–≤–∏–µ–º.\n" +
                    "üì¢ –ß—Ç–æ –≤—ã —É–∑–Ω–∞–µ—Ç–µ:\n" +
                    "   ‚Ä¢ –°—Ä–æ–∫–∏ –∏ –ø—Ä–æ—Ü–µ—Å—Å—ã: –û—Ç–≤–µ—Ç—ã –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –æ –≤—Ä–µ–º–µ–Ω–∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –æ—Ç–∑—ã–≤–æ–≤ –∏ –ø—Ä–∏—á–∏–Ω–∞—Ö, –ø–æ –∫–æ—Ç–æ—Ä—ã–º —ç—Ç–æ—Ç –ø—Ä–æ—Ü–µ—Å—Å –º–æ–∂–µ—Ç –∑–∞–Ω–∏–º–∞—Ç—å –±–æ–ª—å—à–µ –≤—Ä–µ–º–µ–Ω–∏.\n" +
                    "   ‚Ä¢ –ì–∞—Ä–∞–Ω—Ç–∏–∏ –∏ –∫–∞—á–µ—Å—Ç–≤–æ: –û–±—Å—É–∂–¥–µ–Ω–∏–µ —Ç–æ–≥–æ, –∫–∞–∫ –º—ã –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ–º —Å—Ç–æ–π–∫–æ—Å—Ç—å –∏ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å –æ—Ç–∑—ã–≤–æ–≤.\n" +
                    "   ‚Ä¢ –ù—é–∞–Ω—Å—ã –Ω–∞ —Ä–∞–∑–Ω—ã—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞—Ö: –ü–æ–¥—Ä–æ–±–Ω—ã–µ —Ä–∞–∑—ä—è—Å–Ω–µ–Ω–∏—è, –ø–æ—á–µ–º—É —Ä–∞–±–æ—Ç–∞ —Å –æ—Ç–∑—ã–≤–∞–º–∏ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã.\n" +
                    "   üéß –ú—É–ª—å—Ç–∏–º–µ–¥–∏–π–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç:" +
                    "   ‚Ä¢ –ü–æ–¥–∫–∞—Å—Ç—ã –∏ –∞—É–¥–∏–æ–∑–∞–ø–∏—Å–∏: –†–µ–≥—É–ª—è—Ä–Ω—ã–µ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –æ–ø–∏—Å—ã–≤–∞—é—Ç –Ω–∞—à –ø–æ–¥—Ö–æ–¥ –∏ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã —Å –æ—Ç–∑—ã–≤–∞–º–∏ —á–µ—Ä–µ–∑ –∞—É–¥–∏–æ—Ñ–æ—Ä–º–∞—Ç, –¥–µ–ª–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –¥–æ—Å—Ç—É–ø–Ω–æ–π –∏ –ø–æ–Ω—è—Ç–Ω–æ–π." +
                    "üí° –≠–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã–µ –∑–Ω–∞–Ω–∏—è:\n" +
                    "   ‚Ä¢ –ü—Ä–∏–≤–∞—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è: –ü–æ–ª—É—á–∏—Ç–µ –¥–æ—Å—Ç—É–ø –∫ —É–Ω–∏–∫–∞–ª—å–Ω—ã–º –∑–Ω–∞–Ω–∏—è–º –∏ –º–µ—Ç–æ–¥–∏–∫–∞–º, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞—à–∞ –∫–æ–º–∞–Ω–¥–∞ —Å–æ–±–∏—Ä–∞–ª–∞ –≥–æ–¥–∞–º–∏. –≠—Ç–∏ —Ü–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–º–æ–≥—É—Ç –≤–∞–º —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ —É–ø—Ä–∞–≤–ª—è—Ç—å –æ—Ç–∑—ã–≤–∞–º–∏ –∏ —É–ª—É—á—à–∏—Ç—å —Ä–µ–ø—É—Ç–∞—Ü–∏—é –≤–∞—à–µ–≥–æ –±–∏–∑–Ω–µ—Å–∞." +
                    "üîó –ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Ç–µ—Å—å –∫ —Å–æ–æ–±—â–µ—Å—Ç–≤—É:\n" +
                    "üë• –ü–æ–¥–ø–∏—Å—ã–≤–∞–π—Ç–µ—Å—å –Ω–∞ @e_otzyv –∏ —Å—Ç–∞–Ω—å—Ç–µ —á–∞—Å—Ç—å—é –Ω–∞—à–µ–≥–æ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ —Å–æ–æ–±—â–µ—Å—Ç–≤–∞. –í–º–µ—Å—Ç–µ –º—ã —Å–º–æ–∂–µ–º –¥–æ—Å—Ç–∏—á—å –±–æ–ª—å—à–µ–≥–æ —É—Å–ø–µ—Ö–∞ –≤ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –æ—Ç–∑—ã–≤–∞–º–∏ –∏ –¥–µ–ª–æ–≤–æ–π —Ä–µ–ø—É—Ç–∞—Ü–∏–µ–π!",
                    {
                        reply_markup: {
                            inline_keyboard: [
                                [{ text: "–í –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç", callback_data: "profile" }, { text: "–í –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é", callback_data: "start" }]
                            ]
                        }
                    });

                await bot.sendMessage(chatId, "üìà –û—Å–Ω–æ–≤–Ω–æ–π –∫–∞–Ω–∞–ª –ø–æ –Ø–Ω–¥–µ–∫—Å –ø—Ñ (@e_top)\n" +
                    "üîç –ù–∞—à —ç–∫—Å–ø–µ—Ä—Ç–Ω—ã–π –∫–∞–Ω–∞–ª, –ø–æ—Å–≤—è—â—ë–Ω–Ω—ã–π –Ω–∞–∫—Ä—É—Ç–∫–µ –ø–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏—Ö —Ñ–∞–∫—Ç–æ—Ä–æ–≤ –¥–ª—è –Ø–Ω–¥–µ–∫—Å–∞! –ó–¥–µ—Å—å –≤—ã –Ω–∞–π–¥–µ—Ç–µ –≤—Å—ë –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–µ –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–≥–æ —É–ª—É—á—à–µ–Ω–∏—è –≤–∞—à–∏—Ö –ø–æ–∑–∏—Ü–∏–π –≤ –ø–æ–∏—Å–∫–µ –Ø–Ω–¥–µ–∫—Å–∞.\n" +
                    "üöÄ –ß—Ç–æ –≤–∞—Å –∂–¥–µ—Ç –≤ –∫–∞–Ω–∞–ª–µ:\n" +
                    "   ‚Ä¢ –ì–ª—É–±–æ–∫–∏–µ –∞–Ω–∞–ª–∏–∑—ã: –ü–æ–Ω–∏–º–∞–Ω–∏–µ —Ç–æ–≥–æ, –∫–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —É–ª—É—á—à–∞—Ç—å –ø–æ–∑–∏—Ü–∏–∏ –≤ –ø–æ–∏—Å–∫–æ–≤–æ–π –≤—ã–¥–∞—á–µ.\n" +
                    "   ‚Ä¢ –ò–Ω–Ω–æ–≤–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–¥–æ–≤—ã—Ö –º–µ—Ç–æ–¥–∏–∫ –∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π –¥–ª—è –º–∞–∫—Å–∏–º–∏–∑–∞—Ü–∏–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤.\n" +
                    "   ‚Ä¢ –≠–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã–µ —Å–æ–≤–µ—Ç—ã: –ù–∞—à–∏ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—ã –¥–µ–ª—è—Ç—Å—è —Ü–µ–Ω–Ω—ã–º–∏ —Å–æ–≤–µ—Ç–∞–º–∏, –∫–∞–∫ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å—ã –Ω–∞–∫—Ä—É—Ç–∫–∏.\n" +
                    "üéß –ú—É–ª—å—Ç–∏–º–µ–¥–∏–π–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã:\n" +
                    "   ‚Ä¢ –ê—É–¥–∏–æ–º–∞—Ç–µ—Ä–∏–∞–ª—ã: –ü–æ–≥—Ä—É–∂–µ–Ω–∏–µ –≤ —Ç–µ–º—É —á–µ—Ä–µ–∑ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∞—É–¥–∏–æ—É—Ä–æ–∫–∏ –∏ –ø–æ–¥–∫–∞—Å—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –æ–±–ª–µ–≥—á–∞—é—Ç —É—Å–≤–æ–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏.\n" +
                    "üîç –£–≥–ª—É–±–ª—ë–Ω–Ω–æ–µ –∏–∑—É—á–µ–Ω–∏–µ:\n" +
                    "   –ù–∞—à–∞ –∫–æ–º–∞–Ω–¥–∞ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤, –∏–º–µ—é—â–∞—è –º–Ω–æ–≥–æ–ª–µ—Ç–Ω–∏–π –æ–ø—ã—Ç –≤ –Ω–∞–∫—Ä—É—Ç–∫–µ –ø–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏—Ö —Ñ–∞–∫—Ç–æ—Ä–æ–≤ –¥–ª—è –Ø–Ω–¥–µ–∫—Å–∞, –≥–æ—Ç–æ–≤–∞ –ø–æ–¥–µ–ª–∏—Ç—å—Å—è —Å –≤–∞–º–∏ —Å–≤–æ–∏–º–∏ –∑–Ω–∞–Ω–∏—è–º–∏ –∏ –æ–ø—ã—Ç–æ–º. –ü–æ–ª—É—á–∏—Ç–µ –æ—Ç–≤–µ—Ç—ã –Ω–∞ –≤—Å–µ –≤–æ–ø—Ä–æ—Å—ã –∏ –Ω–∞—á–Ω–∏—Ç–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –ø—Ä–æ–¥–≤–∏–≥–∞—Ç—å —Å–≤–æ–∏ –ø—Ä–æ–µ–∫—Ç—ã —É–∂–µ —Å–µ–≥–æ–¥–Ω—è!\n" +
                    "üîó –ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Ç–µ—Å—å –∫ –Ω–∞–º:\n" +
                    "   –ü–æ–¥–ø–∏—Å—ã–≤–∞–π—Ç–µ—Å—å –Ω–∞ –Ω–∞—à –∫–∞–Ω–∞–ª @e_top, —á—Ç–æ–±—ã –≤—Å–µ–≥–¥–∞ –±—ã—Ç—å –≤ –∫—É—Ä—Å–µ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Ç—Ä–µ–Ω–¥–æ–≤ –∏ –º–µ—Ç–æ–¥–∏–∫ –≤ –æ–±–ª–∞—Å—Ç–∏ SEO –¥–ª—è –Ø–Ω–¥–µ–∫—Å–∞.\n\n\n" +



                    "üöÄ –ö–µ–π—Å—ã –ø—Ä–æ–¥–≤–∏–∂–µ–Ω–∏—è Avito (@e_vito_keys)\n" +
                    "üîç –ò–∑—É—á–∏—Ç–µ —Ä–µ–∞–ª—å–Ω—ã–µ –∫–µ–π—Å—ã –ø–æ –ø—Ä–æ–¥–≤–∏–∂–µ–Ω–∏—é –æ–±—ä—è–≤–ª–µ–Ω–∏–π –Ω–∞ Avito. –í —ç—Ç–æ–º –∫–∞–Ω–∞–ª–µ –º—ã –¥–µ–ª–∏–º—Å—è —É—Å–ø–µ—à–Ω—ã–º–∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–∫–∞–∑–∞–ª–∏ –∑–∞–º–µ—Ç–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ø–æ–∑–∏—Ü–∏–π –æ–±—ä—è–≤–ª–µ–Ω–∏–π –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ.\n\n\n" +


                    "üìä –ö–µ–π—Å—ã –ø—Ä–æ–¥–≤–∏–∂–µ–Ω–∏—è –Ø–Ω–¥–µ–∫—Å (@e_top_keys)" +
                    "üîç –ö–µ–π—Å—ã –ø–æ —É–ª—É—á—à–µ–Ω–∏—é –≤–∏–¥–∏–º–æ—Å—Ç–∏ –∏ –ø–æ–∑–∏—Ü–∏–π –≤ –ø–æ–∏—Å–∫–µ –Ø–Ω–¥–µ–∫—Å –ø–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –∑–∞–ø—Ä–æ—Å–∞–º. –ú—ã –ø–æ–∫–∞–∑—ã–≤–∞–µ–º, –∫–∞–∫ –Ω–∞—à–∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –ø–æ–º–æ–≥–∞—é—Ç —Å–∞–π—Ç–∞–º –∑–∞–Ω–∏–º–∞—Ç—å —Ç–æ–ø–æ–≤—ã–µ –º–µ—Å—Ç–∞ –≤ –ø–æ–∏—Å–∫–æ–≤–æ–π –≤—ã–¥–∞—á–µ.\n\n\n" +


                    "üåü –ö–µ–π—Å—ã –ø–æ –æ—Ç–∑—ã–≤–∞–º (@e_otzyv_keys)" +
                    "üîç –û—Ç–∫—Ä–æ–π—Ç–µ –¥–ª—è —Å–µ–±—è, –∫–∞–∫ –º—ã —Ä–∞–±–æ—Ç–∞–µ–º —Å –æ—Ç–∑—ã–≤–∞–º–∏ –Ω–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞—Ö. –≠—Ç–æ—Ç –∫–∞–Ω–∞–ª —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–¥—Ä–æ–±–Ω—ã–µ –æ–ø–∏—Å–∞–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤, —Å–∫—Ä–∏–Ω—à–æ—Ç—ã –∏ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏, –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É—é—â–∏–µ –¥–∏–Ω–∞–º–∏–∫—É —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –∏ –≤–ª–∏—è–Ω–∏–µ –æ—Ç–∑—ã–≤–æ–≤ –Ω–∞ —Ä–µ–ø—É—Ç–∞—Ü–∏—é." +
                    "   –ö–∞–∂–¥—ã–π –∫–∞–Ω–∞–ª –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∏ —Ü–µ–Ω–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã, –ø–æ–º–æ–≥–∞—é—â–∏–µ –≤–∞–º –ª—É—á—à–µ –ø–æ–Ω—è—Ç—å –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–∞—à–∏ —É—Å–ª—É–≥–∏ –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –≤–∞—à–µ–≥–æ –±–∏–∑–Ω–µ—Å–∞. –ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Ç–µ—Å—å –∫ –Ω–∞–º, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ —ç–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã–º –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º.",
                    {
                        reply_markup: {
                            inline_keyboard: [
                                [{ text: "–í –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç", callback_data: "profile" }, { text: "–í –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é", callback_data: "start" }]
                            ]
                        }
                    });
                break;
            case "mypromo":
                await user.sendUserPromo(bot, chatId);
                break;
            case "addpromo":
                await user.addPromo(bot, chatId);
                break;
            case "replacepromo":
                await bot.sendMessage(chatId, "–ù–æ–≤—ã–π –ø—Ä–æ–º–æ–∫–æ–¥ –∑–∞–º–µ–Ω–∏—Ç —Ç–µ–∫—É—â–∏–π.", {
                    reply_markup: {
                        inline_keyboard: [
                            [{ text: "–ó–∞–º–µ–Ω–∏—Ç—å –ø—Ä–æ–º–æ–∫–æ–¥", callback_data: "addpromo" }],
                            [{ text: "–û—Ç–º–µ–Ω–∞", callback_data: "profile" }]
                        ]
                    }
                });
                break;
            case "deletepromo":
                await user.deletePromo(bot, chatId);
                break;
            case "read":
                await user.setStatusReadUserMessage(chatId, callbackData[1]);
                break;
            case "offcriticalnotifications":
                await user.offCriticalNotifications(chatId);
            case "criticalnotifications":
                await user.sendUserCriticalNotifications(bot, chatId);
                break;
            case "paymenthistory":
                await user.sendUserPaymentHistory(bot, chatId);
                break;
            case "pfavito":
                await user.avitoPfQuesAndHandleBalance(bot, msg, chatId, amount.avitoPF, "–ê–≤–∏—Ç–æ –ü–§", msg.from.username);
                break;
            case "pfyandex":
                await user.yandexPfQuesAndHandleBalance(bot, msg, chatId, amount.yandexPF, "–Ø–Ω–¥–µ–∫—Å –ü–§", msg.from.username)
                break;
            case "yandexmap":
                await bot.sendMessage(chatId, "–û—Ç–∑—ã–≤—ã –¥–ª—è –Ø–Ω–¥–µ–∫—Å –∫–∞—Ä—Ç üìç\n\n" +
                    "üîç –û—Ç–∑—ã–≤—ã –æ—Å—Ç–∞–≤–ª—è—é—Ç—Å—è –æ—Ç 3 –¥–æ 14 –¥–Ω–µ–π —Å –º–æ–º–µ–Ω—Ç–∞ –∑–∞–∫–∞–∑–∞.\n" +
                    "       –¢–µ–∫—Å—Ç—ã –¥–ª—è –æ—Ç–∑—ã–≤–æ–≤ –ø–∏—à—É—Ç –Ω–∞—à–∏ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–∏ –ø–æ —Ç–µ–º–∞—Ç–∏–∫–µ\n" +
                    "       –æ–±—ä—è–≤–ª–µ–Ω–∏—è. –í—ã –Ω–µ –º–æ–∂–µ—Ç–µ –≤—ã–±–∏—Ä–∞—Ç—å —Ç–µ–∫—Å—Ç –æ—Ç–∑—ã–≤–∞ –∏–ª–∏ –ø–æ–ª\n" +
                    "       –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è.\n\n" +
                    "       ‚Ä¢ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞: –ü–æ–≤—ã—à–µ–Ω–∏–µ —Ä–µ–π—Ç–∏–Ω–≥–∞ –Ω–∞ –Ø–Ω–¥–µ–∫—Å\n" + "         –∫–∞—Ä—Ç–∞—Ö, —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –¥–æ–≤–µ—Ä–∏—è –∫–ª–∏–µ–Ω—Ç–æ–≤.\n" +
                    "       ‚Ä¢ –ü—Ä–æ—Ü–µ—Å—Å: –ù–∞—à–∏ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–∏ —Å–æ–∑–¥–∞—é—Ç –æ—Ç–∑—ã–≤—ã, –∫–æ—Ç–æ—Ä—ã–µ\n" +
                    "       –ø—Ä–æ—Ö–æ–¥—è—Ç –º–æ–¥–µ—Ä–∞—Ü–∏—é. –í—ã –ø–æ–ª—É—á–∏—Ç–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –∫–∞–∂–¥–æ–º\n" +
                    "       –æ—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–º –æ—Ç–∑—ã–≤–µ –≤ –≤–∏–¥–µ —Å–∫—Ä–∏–Ω—à–æ—Ç–∞.")
                await user.yandexPfQuesAndHandleBalance(bot, msg, chatId, amount.yandexPF, "–Ø–Ω–¥–µ–∫—Å –∫–∞—Ä—Ç—ã –ü–§", msg.from.username);
                break;
            case "yandexservice":
                await bot.sendMessage(chatId, "–û—Ç–∑—ã–≤—ã –¥–ª—è –Ø–Ω–¥–µ–∫—Å –∫–∞—Ä—Ç üìç\n\n" +
                    "üîç –û—Ç–∑—ã–≤—ã –æ—Å—Ç–∞–≤–ª—è—é—Ç—Å—è –æ—Ç 3 –¥–æ 14 –¥–Ω–µ–π —Å –º–æ–º–µ–Ω—Ç–∞ –∑–∞–∫–∞–∑–∞.\n" +
                    "       –¢–µ–∫—Å—Ç—ã –¥–ª—è –æ—Ç–∑—ã–≤–æ–≤ –ø–∏—à—É—Ç –Ω–∞—à–∏ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–∏ –ø–æ —Ç–µ–º–∞—Ç–∏–∫–µ\n" +
                    "       –æ–±—ä—è–≤–ª–µ–Ω–∏—è. –í—ã –Ω–µ –º–æ–∂–µ—Ç–µ –≤—ã–±–∏—Ä–∞—Ç—å —Ç–µ–∫—Å—Ç –æ—Ç–∑—ã–≤–∞ –∏–ª–∏ –ø–æ–ª\n" +
                    "       –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è.\n\n" +
                    "       ‚Ä¢ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞: –ü–æ–≤—ã—à–µ–Ω–∏–µ —Ä–µ–π—Ç–∏–Ω–≥–∞ –Ω–∞ –Ø–Ω–¥–µ–∫—Å\n" + "         –∫–∞—Ä—Ç–∞—Ö, —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –¥–æ–≤–µ—Ä–∏—è –∫–ª–∏–µ–Ω—Ç–æ–≤.\n" +
                    "       ‚Ä¢ –ü—Ä–æ—Ü–µ—Å—Å: –ù–∞—à–∏ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–∏ —Å–æ–∑–¥–∞—é—Ç –æ—Ç–∑—ã–≤—ã, –∫–æ—Ç–æ—Ä—ã–µ\n" +
                    "       –ø—Ä–æ—Ö–æ–¥—è—Ç –º–æ–¥–µ—Ä–∞—Ü–∏—é. –í—ã –ø–æ–ª—É—á–∏—Ç–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –∫–∞–∂–¥–æ–º\n" +
                    "       –æ—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–º –æ—Ç–∑—ã–≤–µ –≤ –≤–∏–¥–µ —Å–∫—Ä–∏–Ω—à–æ—Ç–∞.")
                await user.yandexPfQuesAndHandleBalance(bot, msg, chatId, amount.yandexPF, "–Ø–Ω–¥–µ–∫—Å –°–µ—Ä–≤–∏—Å –ü–§", msg.from.username);
                break;
            case "sendMessageToUser":
                await manager.sendMessageToUser(bot, chatId);
                break;
            case "replyToUser":
                await manager.sendCriticalNotifications(bot, callbackData[1], chatId);
                break;
            case "replyToManager":
                await user.sendReply(bot, chatId, callbackData[1]);
                break;
            case "ordersav":
                await user.showOrders(bot, chatId, "ordersav", Number(callbackData[1]));
                break;
            case "ordersya":
                await user.showOrders(bot, chatId, "ordersya", Number(callbackData[1]));
                break;
            case "otsiv":
                await user.showOrders(bot, chatId, "otsiv", Number(callbackData[1]));
                break;
            case "addbalanceuser":
                await user.topUpBalance(bot, chatId, msg.from.id, msg.from.username);
                break;
            case "showorders":
                await user.showOrderCategories(bot, chatId);
                //await user.showOrders(bot, chatId);
                break;
            case "createref":
                await new Admin().createRefLink(bot, chatId);
                break;
            case "refstats":
                await new Admin().refStats(bot, chatId);
                break;
            case "viewbalance":
                await new Admin().viewUserBalance(bot, chatId);
                break;
            case "addbalanceadmin":
                await new Admin().addBalanceToUser(bot, chatId);
                break;
            case "userhistory":
                await new Admin().userTransactionHistory(bot, chatId);
                break;
            case "deleteuser":
                await new Admin().deleteUser(bot, chatId);
                break;
            case "changestatus":
                await new Admin().changeUserStatus(bot, chatId, msg);
                break;
            case "assignroles":
                await new Admin().changeUserRole(bot, chatId, msg);
                break;
            case "broadcast":
                await new Admin().sendMessageToEveryUser(bot, chatId);
                break;
            case "changeamount":
                await bot.sendMessage(chatId, "–í—ã–±–µ—Ä–∏—Ç–µ –¥–ª—è —á–µ–≥–æ —Ö–æ—Ç–∏—Ç–µ —Å–º–µ–Ω–∏—Ç—å —Å—É–º–º—É", amountsKeyboard);
                break;
            case "amountyandex_pf":
                await new Admin().changeAmountYandex(bot, chatId);
                break;
            case "amountavitopf":
                await new Admin().changeAmountAvito(bot, chatId);
                break;
            case "amountotiv":
                await new Admin().changeAmountOtisv(bot, chatId);
                break;
            case "showuserbalance":
                await user.sendUserBalance(bot, chatId)
                break
            case "orderagainavitopf":
                await user.avitoPfQuesAndHandleBalance(bot, msg, chatId, amount.avitoPF, "–ê–≤–∏—Ç–æ –ø—Ñ", msg.message.from.username)
                break;
            case "startnewyandexpf":
                await user.yandexPfQuesAndHandleBalance(bot, msg, chatId, amount.yandexPF, "–Ø–Ω–¥–µ–∫—Å –ø—Ñ", msg.from.username)
                break
            case "start":
                btns = [['nakrutkapf'], ['nakrutkaotsivov'], ['profile'], ['rules'], ['support'], ['faq']];
                reply_markup = await createKeyboard(btns, "–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é");
                await bot.sendMessage(chatId, `üåü –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ E-Vito! üåü\n\n–ú—ã —Ä–∞–¥—ã –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –≤–∞—Å –≤ –Ω–∞—à–µ–º —Å–µ—Ä–≤–∏—Å–µ...`, {reply_markup});
                break
            case "manageravitopfqueueue":
                await manager.showAvitoPfQueueCount(bot, chatId);
                break
            case "managerachiveavitodate":
                await manager.showAvitoPfArchiveByDate(bot, chatId);
                break
            case "manageryandexpfqueue":
                await manager.showYandexPfQueueCount(bot, chatId);
                break
            case "managerarchiveyandexdate":
                await manager.showYandexPfArchiveByDate(bot, chatId);
                break
            case "managerordersqueue":
                await manager.showReviewsQueueCount(bot, chatId);
                break
            case "managerarchivedate":
                await manager.showReviewsArchiveByDate(bot, chatId);
                break
            case "avitootsiv":
                await user.otsivPfQuesAndHandleBalance(bot, chatId, amount.otsivAvito, "–ê–≤–∏—Ç–æ", msg.from.username, "avitootsiv")
                break
            case "yamdexmapotisv":
                await user.otsivPfQuesAndHandleBalance(bot, chatId, amount.otisvYandexMap, "–Ø–Ω–¥–µ–∫—Å –∫–∞—Ä—Ç—ã", msg.message.from.username, "yamdexmapotisv")
                break
            case "yandexserviceotsiv":
                await user.otsivPfQuesAndHandleBalance(bot, chatId, amount.otisvYandexService, "–Ø–Ω–¥–µ–∫—Å —Å–µ—Ä–≤–∏—Å", msg.from.username, "yandexserviceotsiv")
                break;
            case "twogisotsiv":
                await user.twoGis(bot, chatId, amount.twoGis, "2–ì–ò–°");
                break;
            case "youlaotsiv":
                await user.youla(bot, chatId, amount.youla, "–Æ–ª–∞");
                break;
            case "otzovikotsiv":
                await user.otzovik(bot, chatId, amount.otzovik, "otzovik");
                break;
            
        }
        if (msg.data && msg.data.includes("accept") || msg.data.includes("reject")) {
            await manager.handleOrderAction(bot, chatId, msg);
        }
    }
    else{
        let btns = [['start']];
        let reply_markup = await createKeyboard(btns, '–ù–µ –¥–æ—Å—Ç—É–ø–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è');
        await bot.sendMessage(chatId, "‚ö†Ô∏è –î–∞–Ω–Ω—ã–π —Ä–∞–∑–¥–µ–ª –±–æ–ª—å—à–µ –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–µ—Ä–Ω–∏—Ç–µ—Å—å –Ω–∞ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É", {reply_markup});
    }
});


bot.on('polling_error', console.log)
